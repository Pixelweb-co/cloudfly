<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.cloudfly.pos.controllers.POSController"
            prefHeight="700" prefWidth="1200">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #6366f1; -fx-padding: 15 20;">
            <Label text="CloudFly POS" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label fx:id="userLabel" text="Usuario" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
            <Label fx:id="dateTimeLabel" style="-fx-text-fill: white; -fx-font-size: 14px;" minWidth="200"/>
            <Button text="CERRAR" onAction="#handleLogout"
                   style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-padding: 10 20;"/>
        </HBox>
    </top>
    
    <center>
        <SplitPane dividerPositions="0.7">
            <VBox spacing="15" style="-fx-padding: 20;">
                <HBox spacing="10">
                    <TextField fx:id="searchField" promptText="Buscar..." prefHeight="45" prefWidth="300"/>
                    <Button text="BUSCAR" onAction="#handleSearch" prefHeight="45"
                           style="-fx-background-color: #6366f1; -fx-text-fill: white;"/>
                </HBox>
                <ScrollPane fitToWidth="true" prefHeight="600">
                    <FlowPane fx:id="productsPane" hgap="15" vgap="15" style="-fx-padding: 10;"/>
                </ScrollPane>
            </VBox>
            
            <VBox spacing="15" style="-fx-background-color: #f3f4f6; -fx-padding: 20;" prefWidth="350">
                <Label text="CARRITO" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <ScrollPane fitToWidth="true" prefHeight="400">
                    <VBox fx:id="cartPane" spacing="10"/>
                </ScrollPane>
                <Separator/>
                <GridPane hgap="10" vgap="10">
                    <Label text="Subtotal:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="subtotalLabel" text="0.00" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                    <Label text="Descuento:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="discountLabel" text="0.00" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    <Label text="TOTAL:" style="-fx-font-size: 20px; -fx-font-weight: bold;" 
                           GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <Label fx:id="totalLabel" text="0.00" style="-fx-font-size: 20px; -fx-font-weight: bold;" 
                           GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                </GridPane>
                <Button text="PROCESAR VENTA" onAction="#handleCheckout" prefHeight="50"
                       style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-font-size: 16px;"/>
                <Button text="LIMPIAR" onAction="#handleClearCart" prefHeight="50"
                       style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-font-size: 16px;"/>
            </VBox>
        </SplitPane>
    </center>
</BorderPane>
